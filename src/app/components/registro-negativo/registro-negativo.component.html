<app-navbar></app-navbar>
<main class="container-fluid app-main " style="padding-left: 7rem;padding-right: 7rem;">
  <div class="row">
    <button class="btn btn-link text-secondary" style="padding-left: 6px;" routerLink="/home"
      title="Regresar al Pantalla Principal">
      <span class="fas fa-chevron-left"></span> Pantalla Principal
    </button>
  </div>

  <div class="container-fluid">
    <div class="row mb-2 mt-2" style="display: flex;justify-content: center;">
      <div class="col-12 Header">



        <div class="row mb-2 mt-2">
          <div class="Header">
            <div class="col-lg-12" style="padding-left: 0px;">
              <h4 class="TitleLine">Registros Negativos</h4>
            </div>
          </div>
        </div>
        <!-- <div class="row">
            <div class="col-lg-8">

            </div>
            <div class="col-lg-4" style="padding-top: 28px;">
                <button class="btn btnRegistrar" style="width: 74%;" (click)="DescargarPlantilla()"><svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px"
                    width="24" height="24"
                    viewBox="0 0 48 48"
                    style=" fill:#000000;"><path fill="#4CAF50" d="M41,10H25v28h16c0.553,0,1-0.447,1-1V11C42,10.447,41.553,10,41,10z"></path><path fill="#FFF" d="M32 15H39V18H32zM32 25H39V28H32zM32 30H39V33H32zM32 20H39V23H32zM25 15H30V18H25zM25 25H30V28H25zM25 30H30V33H25zM25 20H30V23H25z"></path><path fill="#2E7D32" d="M27 42L6 38 6 10 27 6z"></path><path fill="#FFF" d="M19.129,31l-2.411-4.561c-0.092-0.171-0.186-0.483-0.284-0.938h-0.037c-0.046,0.215-0.154,0.541-0.324,0.979L13.652,31H9.895l4.462-7.001L10.274,17h3.837l2.001,4.196c0.156,0.331,0.296,0.725,0.42,1.179h0.04c0.078-0.271,0.224-0.68,0.439-1.22L19.237,17h3.515l-4.199,6.939l4.316,7.059h-3.74V31z"></path></svg>
                    Plantilla</button>
    
              </div>
        </div> -->


        


        <div class="row ">
        <div class="col-xl-1 col-lg-1"></div>
        <div class="col-xl-4 col-lg-3"></div>
       
        <div class="col-lg-3 col-xl-2" style="padding-top: 28px;">
            <button  (click)="excel()" class="btn btn-outline-info form-control ml-2 mr-2 buttonSinBorder colorButton"><i class="fas fa-download"></i> Descargar Plantilla </button>
        </div>
        
          <div class="col-xl-3 col-lg-3" style="padding-top: 28px;">
            <div class="custom-file mb-3">

              <input #myInput type="file" class="custom-file-input buttonSinBorder colorButton" id="customFile" name="filename" accept=".xlsx" 
                (change)="setDataFile($event)">
              <label class="custom-file-label" for="customFile"
                style="background-color:#e9ecef">{{this.NombreArchivo == '' ? "Adjuntar Archivo" : this.NombreArchivo }}</label>
            </div>
          </div>

          <div class="col-xl-2 col-lg-2" style="padding-top: 28px;">
            <button class="btn btnRegistrar" style="width: 100%;" (click)="RegistrarArchivo()">Registrar</button>

          </div>
        
          
          
        </div>


        <div class="borderFormat">
        
          <div class="row form-group">
            <div style="padding: 5px 15px 0px;width:151px">
                <span class="fontText">Nombre Completo:</span>
            </div>
            <div class="col-lg-9 col-xl-3">
                <input class="form-control buttonSinBorder colorButton" (keypress)="soloLetras($event)" type="text" [(ngModel)]="nombreCompleto" placeholder="Nombre Completo">
            </div>
           
            <div class="textoDoc" style="padding: 5px 15px 0px;width:182px">
                <span class="fontText ">Número de Documento:</span>
            </div>
            <div class="col-lg-9 col-xl-2">
                <input class="form-control buttonSinBorder colorButton" (keypress)="validaNumericos($event)" type="text" [(ngModel)]="documento"  placeholder="Número de Documento">
            </div>
            <div style="padding: 5px 15px 0px;width:100px">
              <span class="fontText">Señal Laft:</span>
            </div>
            <div class="col-lg-3 col-xl-2">
              <select class="form-control buttonSinBorder colorButton" (change)='changeTipo()' [(ngModel)]="TIPO">
                <option value="0">--Todos--</option>
                <option value="ALIAS">ALIAS</option>
                <option value="BAJO">BAJO</option>
                <option value="MEDIO">MEDIO</option>
                <option value="ALTO">ALTO</option>
              
              </select>
            </div>
            <div class="col-lg-12 col-xl-1 ">
              <button class="btn btnRegistrar" style="width: 100%;" (click)="Buscar()">Buscar</button>
  
            </div>
        </div>

        <!-- <div class="row form-group ">
           
          
          
            <div class="col-lg-12 col-xl-2 ">
                <button class="btn btnRegistrar" style="width: 100%;" (click)="Buscar()">Buscar</button>
    
              </div>
        </div> -->
            
           


         




        </div>

        <div class="borderFormat" style="overflow-y:auto;font-size: 14px;" >
            <br>
            <table class="striped" style="margin-top: -50px;font-size: 14px;">
                <thead>
                    <tr>
                        <th>Número de Documento</th>
                        <th>Nombre Completo</th>
                        <th>Señal Laft</th>
                        <th>Filtro</th>
                       
                        
                        <th>Tipo de Persona</th>
                        <th>Doc. Referencia</th>
                        <th>Tipo Lista</th>
                        <th>Fecha Descubrimiento</th>
                        <th>Pais</th>
                       
                    </tr>
                </thead>
                <ng-container *ngIf="listNegativa!=null && listNegativa.length>0; then showGrid else hideGrid">  </ng-container>

                 <ng-template #showGrid>
                <tbody>
                    <tr *ngFor="let item of this.listNegativa | slice: (page-1) * pageSize : (page-1) * pageSize + pageSize; let ind = index;">
                        <td>{{item.SNUMIDENTIDAD}}</td>
                        <td>{{item.SNOM_COMPLETO}}</td>
                        <td>{{item.SSENAL_LAFT}}</td>
                        <td>{{item.SFILTRO1}}</td>
                        
                        
                        <td>{{item.STIPOPERSONA}}</td>
                        <td>{{item.SDOCREFERENCIA}}</td>
                        <td>{{item.STIPOLISTA}}</td>
                        <td>{{item.SFEDESCUBRIMIENTO}}</td>
                        <td>{{item.STIPODOC_PAIS}}</td>
                        
                        
                        
                    </tr>
                </tbody>
            </ng-template>
            </table>

            <ng-template #hideGrid>
                <tbody>
                    <tr style="text-align: center;font-size: 14px;">
                        <td colspan="10">No se han encontrado resultados</td>
                    </tr>
                </tbody>
            </ng-template>


            




        </div>

        <div *ngIf="this.listNegativa.length > 0" class="row mt-4">
          <div class="col-sm-4">
            <button (click)="exportExcel()"
              class="btn btn-outline-info form-control  buttonSinBorder colorButton"><i class="fas fa-download"></i>
              Descargar Resultados
            </button>
          </div>
        </div>

        <br>
      </div>


      <ng-container *ngIf="listNegativa!=null && listNegativa.length>0; then showPagination"></ng-container>
      <ng-template #showPagination>
          <div class="row mt-4">
              <div class="col-sm-12">
                   <!-- <ngb-pagination [(page)]="currentPage" [pageSize]="itemsPerPage"
                      [collectionSize]="totalItems" [maxSize]="maxSize" aria-label="Default pagination"
                      (pageChange)="pageChanged(currentPage)"> 
                      
                  </ngb-pagination>  -->
                  <ngb-pagination [collectionSize]="listNegativa.length" [(page)]="page" [maxSize]="5"
                  aria-label="Default pagination"></ngb-pagination>
                  <!-- <ngb-pagination [collectionSize]="processlistToShow.length" [(page)]="page" [maxSize]="5"
      aria-label="Default pagination"></ngb-pagination> -->
              </div>
          </div>
      </ng-template>


    </div>
  </div>

  
  <div class="" style="padding-bottom: 80px;">

  </div>
</main>
<app-footer></app-footer>
