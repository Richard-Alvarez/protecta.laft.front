<div class="row" *ngIf="getIsValidStateAllow(stateRevisado.sState)">
    <div class="col-lg-12">
        <div class="row">
            <div class="col-lg-3">
                <div class="card" style="margin-bottom: 0;border-bottom: none;">
                    <div class="card-header" style="background-color: white;">
                        <div class="text-left">
                            <div class="badge {{getClassBagdeState(stateRevisado.sState)}}" style="font-size: 20px;font-weight: bold;float: left;">
                                R </div>
                        </div>
                        <div class="text-left">
                            <div class="" style="padding-left: 5px;font-size: 20px;font-weight: bold;float: left;">
                                -</div>
                        </div>
                        <div class="text-left">
                            <div class="badge " style="font-size: 20px;font-weight: bold;">
                                {{capitalizarPrimeraLetra(stateRevisado.sState)}}</div>
                        </div>

                    </div>
                </div>
            </div>
            <div class="col-lg-9">

            </div>
        </div>
    </div>

    <div class="col-lg-12">
        <div class="card" *ngIf="(arrResponsable).length > 0">
            <div>
                <div *ngFor="let userGroup of getArrayUserGroup(regimen.id,stateRevisado.sState);"  class="1">
                    <div *ngIf="STIPO_USUARIO === 'OC' && getValidationArrayByUser(userGroup)" class="table-responsive" class="2">
                        <div class="col-lg-3" style="display: flex;justify-content: left;">
                            <h5 style="font-size: 18px;" class="TitleLine">{{userGroup}}
                            </h5>
                        </div>
                    </div>

                    <div class="card" *ngIf="getValidationArrayByUser(userGroup)" style="border: none;background-color: white;">
                        <div class="card-body " style="padding-bottom: 0px;"  >
                            <div class="card" style="border: none;background-color: white;">
                                <div class="card-header" style="padding-bottom: 0px;">
                                    <div class="row">
                                        <div class="col-lg-1">

                                        </div>
                                        <div class="col-lg-11">
                                            <div class="row">
                                                <div class="col-lg-2">
                                                    <div class="text-left txtCabecera">Señal</div>
                                                </div>
                                                <div class="col-lg-2">
                                                    <div class="text-left txtCabecera">Fecha de movimiento</div>
                                                </div>
                                                <div class="col-lg-3"></div>
                                                <div class="col-lg-3">
                                                    <div class="text-left txtCabecera">Respuesta y Comentario del responsable</div>
                                                </div>
                                                <div class="col-lg-2">
                                                    <div class="text-left txtCabecera">Fecha de revisión</div>
                                                </div>
                                            </div>
                                        </div>

                                    </div>
                                </div>
                            </div>


                        </div>
                    </div>



                    <div class="card-body " style="margin-top: 0px;padding-top: 0px;"  *ngIf="getValidationArrayByUser(userGroup)">
                        <div *ngFor="let item of getArray(stateRevisado.sState,regimen.id);let index = index;" style="border:none;padding: 0px;margin: 0px;">
                            <div class="card mt-1" style="border:none;padding: 0px;margin: 0px;" *ngIf="getValidationNameEqualsResponsable(userGroup,item.NOMBRECOMPLETO);">
                                <div id="{{stateRevisado.sCollapHead + regimen.desCorto + index}}">
                                    <div class="card-header headerSenials " style="margin-top: 0px;padding-top: 0px;">

                                        <div class="row">
                                            <div class="col-lg-1">
                                                <div class="pt-4 pl-4">
                                                    <i class="fas fa-2x fa-ellipsis-h" style="cursor: pointer;" data-toggle="collapse" attr.href="#{{stateRevisado.sHrefHead + regimen.desCorto + index}}"></i>
                                                </div>
                                                <!--<div class="pr-4">
                                                    <input type="file" name="file" id="archivo0"
                                                        class="inputfile" multiple 
                                                        (change)="uploadFiles($event, item.SNOMBRE_ALERTA, 'RE')" />
                                                    <div class="text-center mt-3">
                                                        <label for="archivo0">
                                                            <i class="fas fa-paperclip fa-2x fa-lg"
                                                                style="color: #706d6d;cursor:pointer">
                                                                <div class="parrafoAdj text-center">Adjuntar archivo</div>
                                                            </i>
                                                        </label>
                                                   </div>
                                                </div>-->
                                            </div>
                                            <div class="col-lg-11">
                                                <div class="row">
                                                    <div class="col-lg-12  ">
                                                        <div class="card-link unlinkeo">

                                                            <div class="row">
                                                                <div class="col-lg-2 pt-3">
                                                                    <div class="text-left badge badge-danger" style="font-size: 16px;font-weight: bold;">
                                                                        {{item.SNOMBRE_ALERTA}}
                                                                    </div>
                                                                </div>
                                                                <div class="col-lg-2 pt-3">
                                                                    <div class="text-left">
                                                                        <div class="txtDetalle" style="text-align:justify">
                                                                            {{item.DFECHA_ESTADO_MOVIMIENTO}}
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="col-lg-8">

                                                                </div>

                                                            </div>
                                                            <div>

                                                                <div *ngFor="let pregHeadOne of item.arrPreguntasCabecera;let incPregHeadOne = index;">
                                                                    <div class="row mt-2" style="">
                                                                        <div class="col-lg-7" *ngIf="STIPO_USUARIO === 'OC'">
                                                                            <div class="tooltipT">
                                                                                <!-- <div class="tooltiptextT">
                                                                                    
                                                                                    <div class="ml-1 mr-1">
                                                                                        {{pregHeadOne.SPREGUNTA}}
                                                                                    </div>
                                                                                </div> -->
                                                                                <div class="txtDetalle" style="text-align:justify">
                                                                                    <div style="padding-left: 0px;font-weight: bold;display: inline;color: royalblue;">{{getAlerta(item.SNOMBRE_ALERTA)}}</div>
                                                                                    {{pregHeadOne.SPREGUNTA}}
                                                                                </div>
                                                                            </div>

                                                                        </div>

                                                                        <div class="col-lg-3" *ngIf="STIPO_USUARIO === 'OC'">
                                                                            <div class="txtDetalle" style="text-align:justify">
                                                                                <div class="row">
                                                                                    <div class="pr-3" style=" padding-left: 20px;color: royalblue;font-weight: 700;display: inline;">{{pregHeadOne.SRESPUESTA}}</div>

                                                                                    <div class="col-10"> {{pregHeadOne.SCOMENTARIO}} </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        <!-- <div class="txtDetalle">
                                                                            <div class="row">

                                                                                 <div class="pr-2 "
                                                                                 style="padding-left:13px;color: royalblue;font-weight: 700;display: inline;">
                                                                                 {{pregHeadOne.SRESPUESTA}}
                                                                                 </div>
                                                                                 <div class="col-10">
                                                                                 {{pregHeadOne.SCOMENTARIO}}
                                                                                 </div>

                                                                            </div>
                                                                        </div> -->
                                                                        <div class="col-lg-2" *ngIf="STIPO_USUARIO === 'OC'">
                                                                            <div class="txtDetalle" style="text-align:justify">{{item.DFECHA_ESTADO_MOVIMIENTO}}</div>
                                                                        </div>


                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="row mt-3">
                                                                <div class="col-lg-7"></div>
                                                                <div class="col-lg-3">
                                                                    <app-adjuntar-files [parent]="this" [item]="item" [indexInput]="index" [arrFilesAdjuntos]="getFiles(item.SNOMBRE_ALERTA, STIPO_USUARIO)" [arrFilesGuardados]="[]" [statusSTIPO_CARGA]="'ADJUNTOS-FORM'"></app-adjuntar-files>
                                                                </div>
                                                                <div class="col-lg-2"></div>



                                                            </div>
                                                        </div>


                                                    </div>





                                                </div>
                                            </div>
                                        </div>


                                    </div>
                                    <div id="{{stateRevisado.sHrefHead + regimen.desCorto + index}}" class="collapse" style="background-color: white;" attr.data-parent="#{{stateRevisado.sCollapHead + regimen.desCorto + index}}">

                                        <app-button-download-report [item]="item" [regimen]="regimen" [STIPO_USUARIO]="STIPO_USUARIO" [parent]="this"></app-button-download-report>

                                        <div class="row" *ngIf="STIPO_USUARIO === 'OC' || this.ValidadorHistorico !=='0'">
                                            <div class="col-lg-12" *ngFor="let listComplemento of filtroComplemeto2(item) ;">
                                                <div class="row mb-2 " style="padding-left: 30px;">
                                                  <div class="Header">
                                                    <div class="row">
                                                      <div class="col-lg-19">
                                                        <h4 class="TitleLine2">Complemento {{listComplemento.SNOMBRE_COMPLEMENTO}}</h4>
                                                      </div>
                                                    </div>
                  
                                                  </div>
                                                  <br>
                  
                                                </div>
                                                
                                                <!-- <div class="row pt-2">
                                                    <div class="col-lg-12" style="padding: 0px 60px 0px 30px;">
                                                        <div class="borderFormat">
                  
                                                            <div class="row pt-2">
                                                                <div class="form-group" style="padding-left: 20px;padding-top:5px">
                                                                  <span class="fontText">Nombre del complemento :</span>
                                                                </div>
                                                                <div class="col-lg-3 form-group">
                                                                  <input [disabled]="true" id="usName" type="text" class="form-control buttonSinBorder"
                                                                    value={{listComplemento.SNOMBRE_COMPLEMENTO}}>
                                                                </div>
                                                                <div class="col-lg-1 form-group">
                                                                   
                                                                  </div>
                                
                                                                <div class="form-group" style="padding-top:5px">
                                                                  <span class="fontText">Descripción del complemento :</span>
                                                                </div>
                                                                <div class="col-lg-3 form-group" style="padding-left:13px">
                                                                  <input [disabled]="true" id="usName" type="text" class="form-control buttonSinBorder"
                                                                    value={{listComplemento.SDESCRIPCION}}>
                                                                </div>
                                
                                                              </div>
                                                        </div>
                                                    </div>
                                                </div> -->
                                                
                  
                  
                                                <div class="row container-fluid">
                                                  <div class="col-12">
                                                    <div class="borderFormat">
                                                      <div class="row" style="border-bottom: 2px solid #26296D;">
                                                        <div class="col-2 txtCabecera" style="font-size: 14px;">Nombre</div>
                                                        <div class="col-3 txtCabecera" style="font-size: 14px;">Perfil </div>
                                                        <div class="col-2 txtCabecera" style="font-size: 14px;">Cargo</div>
                                                        <div class="col-2 txtCabecera" style="font-size: 14px;">Estado</div>
                                                        <div class="col-2 txtCabecera" style="font-size: 14px;">Email</div>
                                                        <div class="col-1 txtCabecera" style="font-size: 14px;">Documento</div>
                                                        
                                                      </div>
                  
                                                     
                                                       <div *ngIf="true" >
                                                       
                                                            <div *ngFor="let array of  this.NewArreglo"> 
                                                                <div *ngIf="array.NIDALERTA == item.NIDALERTA && array.NOMBRECOMPLETO == item.NOMBRECOMPLETO;"> 
                                                                    <div *ngIf="array.RESULTADO.length !==0;else ListaVacia">
                                                                <div *ngFor="let listUsu of  array.RESULTADO; let indice = index">
                                                                    <div class="row"  id="pintaGrilla"  style="padding-top: 1.1rem; padding-bottom: 1.1rem;">
                        
                                                                    
                                                                   
                                                                    <div class="col-2 text-left txtDetalle">{{listUsu.NOMBRECOMPLETO}}</div>
                                                                    <div class="col-3 text-left txtDetalle">{{listUsu.SNAME}}</div>
                                                                    <div class="col-2 text-left txtDetalle">{{listUsu.SDESCARGO}}</div >
                                                                    <div class="col-2 text-left txtDetalle">{{listUsu.SNOMBRE_ESTADO}}</div>
                                                                    <div class="col-2 text-left txtDetalle">{{listUsu.SEMAIL}}</div>
                                                                    <div class="col-1 text-center txtDetalle">
                                                                        <a *ngIf="listUsu.SNOMBRE_ESTADO !== 'PENDIENTE'" style="cursor: pointer"><i
                                                                            class="fas fa-file-excel" (click)="descargarComplemento(item,listUsu)" style="color:green;font-size: 20px;"></i></a>
                                                                      </div>
                            
                                                                    
                                                                 
                                                                </div>
                                                                </div> 
                                                            </div>
                                                                </div> 
                                                            </div>
                                                            <ng-template #ListaVacia>
                                                                <div class="col-12 text-center txtDetalle" style="font-weight: 700;padding-top:15px">No hay usuarios agregados</div>
                                                            </ng-template>
                                                        </div>

                                                         
                                                            <div *ngIf="true" >
                                                          
                                                                <div *ngFor="let listUsu of  item.RESULTADO; let indice = index">
                                                                    <div class="row"  id="pintaGrilla"  style="padding-top: 1.1rem; padding-bottom: 1.1rem;">
                        
                                                                    
                                                                  
                                                                    <div class="col-2 text-left txtDetalle">{{listUsu.NOMBRECOMPLETO}}</div>
                                                                    <div class="col-3 text-left txtDetalle">{{listUsu.SNAME}}</div>
                                                                    <div class="col-2 text-left txtDetalle">{{listUsu.SDESCARGO}}</div >
                                                                    <div class="col-2 text-left txtDetalle">{{listUsu.SNOMBRE_ESTADO}}</div>
                                                                    <div class="col-2 text-left txtDetalle">{{listUsu.SEMAIL}}</div>
                                                                    <div class="col-1 text-center txtDetalle">
                                                                        <a *ngIf="listUsu.SNOMBRE_ESTADO !== 'PENDIENTE'" style="cursor: pointer"><i
                                                                            class="fas fa-file-excel" (click)="descargarComplemento(item,listUsu)" style="color:green;font-size: 20px;"></i></a>
                                                                      </div>
                            
                                                                    
                                                                    
                                                                </div>
                                                                
                                                            </div>
                                                        </div>

                                                     
                                                      <ng-template #ListaVacia>
                                                        <div class="col-12 text-center txtDetalle" style="font-weight: 700;">No hay
                                                          usuarios agregados</div>
                                                      </ng-template>
                  
                  
                                                    </div>
                                                  </div>
                                                </div>
                  
                  
                                               
                  
                  
                  
                  
                                                <!-- Nombre del complemento :  {{listComplemento.SNOMBRE_COMPLEMENTO}}  
                                                                                  Descripción del complemento :  {{listComplemento.SDESCRIPCION}} -->
                  
                                              </div>
                                            </div>

                                        <div class="card-body" style="background-color: white;">

                                            <div *ngIf="item.NIDALERTA !== 2">

                                                <app-c1-detail-company [parent]="this" [objAlerta]="item" [objState]="stateRevisado"></app-c1-detail-company>
                                                <div class="">
                                                    <!--CONVERSACION-->
                                                    <app-comments-alerts-state [parent]="this" [arrConversacion]="item.arrConversacionCabecera">
                                                    </app-comments-alerts-state>
                                                </div>






                                            </div>
                                            <!-- <div *ngIf="item.NIDALERTA === 2">
                                                <app-view-c2-form></app-view-c2-form>
                                            </div> -->

                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!--<br>
                        <div class="row">
                            <div class="col-lg-10">

                            </div>
                            <div class="col-lg-2">
                                <button type="button"
                                    class="btn btn-warning" *ngIf="STIPO_USUARIO==='RE' && stateRevisado.sState !== 'CERRADO'">Enviar</button>
                                <button type="button"
                                    class="btn btn-warning" *ngIf="STIPO_USUARIO==='OC' && stateRevisado.sState !== 'CERRADO' && stateRevisado.sState !== 'PENDIENTE' && stateRevisado.sState !== 'REVISADO'">Aprobar</button>
                            </div>
                        </div>-->
                    </div>


                </div>

            </div>


        </div>
       
        <div class="card" *ngIf="(arrResponsable).length == 0">
            <div class="card-body">
                <div class="row">
                    <div class="col-lg-4"></div>
                    <div class="col-lg-4">
                        <p class="text-center">{{parent.cadenaEstadosSinForm}}</p>
                    </div>
                    <div class="col-lg-4"></div>
                </div>
            </div>
        </div>
    </div>


</div>