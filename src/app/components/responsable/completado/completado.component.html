<div class="row" *ngIf="getIsValidStateAllow(stateCompletado.sState)">
    <div class="col-lg-12">
        <div class="row">
            <div class="col-lg-3">
                <div class="card" style="margin-bottom: 0;border-bottom: none;">
                    <div class="card-header" style="background-color: white;">
                        <div class="text-left">
                            <div class="badge {{getClassBagdeState(stateCompletado.sState)}}" style="color: white;font-size: 20px;font-weight: bold;float: left;">
                                C </div>
                        </div>
                        <div class="text-left">
                            <div class="" style="padding-left: 5px;font-size: 20px;font-weight: bold;float: left;">
                                -</div>
                        </div>
                        <div class="text-left">
                            <div class="badge" style="font-size: 20px;font-weight: bold;">
                                {{capitalizarPrimeraLetra(stateCompletado.sState)}}</div>
                        </div>

                    </div>
                </div>
            </div>
            <div class="col-lg-9">

            </div>
        </div>
    </div>

    <div class="col-lg-12">
        <div class="card" *ngIf="(getArray(stateCompletado.sState,regimen.id)).length > 0">
            <div>
                <div *ngFor="let userGroup of getArrayUserGroup(regimen.id,stateCompletado.sState); let indexgroup = index" class="1">

                    <div *ngIf="STIPO_USUARIO === 'OC' && getValidationArrayByUser(userGroup)" class="table-responsive" class="2">
                        <div class="col-lg-3" style="display: flex;justify-content: left;">
                            <h5 style="font-size: 18px;" class="TitleLine">{{userGroup}}
                            </h5>
                        </div>
                    </div>
                    <!-- <br> -->

                    <div *ngIf="Cabecera(); else CabeceraResponsable">
                        <div *ngIf="getValidationArrayByUser(userGroup)" class="card" style="border: none;background-color: white;">

                            <div class="card-body" style="padding-bottom: 0px;">
                                <div class="card" style="border: none;background-color: white;">
                                    <div class="card-header" style="padding-bottom: 0px;">
                                        <div class="row" *ngIf="STIPO_USUARIO=='RE'">
                                            <div class="col-lg-1">

                                            </div>
                                            <div class="col-lg-11">
                                                <div class="row">
                                                    <div class="col-lg-1" style="padding-left: 0px;">
                                                        <div class="text-left txtCabecera">Señal</div>
                                                    </div>
                                                    <div class="col-lg-3" style="padding-left: 65px;">
                                                        <div class="text-left txtCabecera">Fecha de movimiento</div>
                                                    </div>
                                                    <!-- <div class="col-lg-1"></div> -->
                                                    <div class="col-lg-3" style="padding-left: 0px;">
                                                        <div class="text-left txtCabecera">Respuesta y Comentario</div>
                                                    </div>
                                                    <div class="col-lg-5">
                                                        <div class="text-left txtCabecera">Adjuntos</div>
                                                    </div>
                                                </div>
                                            </div>

                                        </div>
                                        <div class="row" *ngIf="STIPO_USUARIO=='OC'">
                                            <div class="col-lg-1">

                                            </div>
                                            <div class="col-lg-11">
                                                <div class="row">
                                                    <div class="col-lg-11">
                                                        <div class="row">
                                                            <div class="col-lg-6">
                                                                <div class="row">
                                                                    <div class="col-lg-3" style="padding-left: 0px;">
                                                                        <div class="text-left txtCabecera">Señal</div>
                                                                    </div>
                                                                    <div class="col-lg-3" style="padding-left: 0px;">
                                                                        <div class="text-left txtCabecera">Fecha de movimiento
                                                                        </div>
                                                                    </div>
                                                                    <div class="col-lg-6" style="padding-left: 0px;">
                                                                        <div class="text-left txtCabecera">Respuesta Y Comentario del responsable</div>
                                                                    </div>
                                                                </div>

                                                            </div>
                                                            <div class="col-lg-6">
                                                                <div class="text-left txtCabecera">Adjuntos</div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-lg-1">
                                                        <div class="text-center txtCabecera">Revisado</div>

                                                    </div>

                                                </div>
                                            </div>

                                        </div>
                                    </div>
                                </div>


                            </div>
                        </div>
                    </div>

                    <ng-template #CabeceraResponsable>
                        <div *ngIf="getValidationArrayByUser(userGroup)" class="card" style="border: none;background-color: white !important;">

                            <div class="card-body" style="padding-bottom: 0px;">
                                <div class="card" style="border: none;background-color: #27246d;">
                                    <div class="card-header" style="padding-bottom: 0px;">
                                        <div class="row" *ngIf="STIPO_USUARIO=='RE'">
                                            <div class="col-lg-1">

                                            </div>
                                            <div class="col-lg-11">
                                                <div class="row">
                                                    <div class="col-lg-1" style="padding-left: 0px;">
                                                        <div class="text-left txtCabecera">Señal</div>
                                                    </div>
                                                    <div class="col-lg-3" style="padding-left: 0px;">
                                                        <div class="text-left txtCabecera">Fecha de movimiento</div>
                                                    </div>
                                                    <!-- <div class="col-lg-1"></div> -->
                                                    <div class="col-lg-3" style="padding-left: 0px;">
                                                        <div class="text-left txtCabecera">Respuesta y Comentario</div>
                                                    </div>
                                                    <div class="col-lg-5">
                                                        <div class="text-left txtCabecera">Adjuntos</div>
                                                    </div>
                                                </div>
                                            </div>

                                        </div>
                                        <div class="row" *ngIf="STIPO_USUARIO=='OC'">
                                            <div class="col-lg-1">

                                            </div>
                                            <div class="col-lg-11">
                                                <div class="row">
                                                    <div class="col-lg-11">
                                                        <div class="row">
                                                            <div class="col-lg-6">
                                                                <div class="row">
                                                                    <div class="col-lg-4" style="padding-left: 0px;">
                                                                        <div class="text-left txtCabecera">Señal</div>
                                                                    </div>
                                                                    <div class="col-lg-2" style="padding-left: 0px;">
                                                                        <div class="text-left txtCabecera">Fecha de movimiento
                                                                        </div>
                                                                    </div>
                                                                    <div class="col-lg-6" style="padding-left: 0px;">
                                                                        <div class="text-left txtCabecera">Respuesta Y Comentario del responsable</div>
                                                                    </div>
                                                                </div>

                                                            </div>
                                                            <div class="col-lg-6">
                                                                <div class="text-left txtCabecera">Adjuntos</div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-lg-1">
                                                        <div class="text-center txtCabecera">Revisado</div>

                                                    </div>

                                                </div>
                                            </div>

                                        </div>
                                    </div>
                                </div>


                            </div>
                        </div>
                    </ng-template>



                    <div *ngIf="getValidationArrayByUser(userGroup)" class="card-body " style="margin-top: 0px;padding-top: 0px;">
                        <div style="padding-left: 0px;padding-right: 0px;height: auto;max-height: 400px;overflow-y: auto;overflow-x: hidden;">
                            <div *ngFor="let item of getArray(stateCompletado.sState,regimen.id);let index = index;" style="border:none;padding: 0px;margin: 0px;">

                                <div *ngIf="CabeceraTaps()" class="col-lg-12" style="padding-top: 20px;padding-left: 0px;padding-right: 0px;">
                                    <nav>
                                        <div class="nav nav-tabs" id="nav-tab" role="tablist">
                                            <a class="nav-item nav-link active" id="nav-home-tab{{index}}" data-toggle="tab" href="#nav-home{{index}}" role="tab" aria-controls="nav-home{{index}}" aria-selected="true">Respuesta </a>
                                            <a class="nav-item nav-link" id="nav-history-tab{{index}}" data-toggle="tab" href="#nav-history{{index}}" role="tab" aria-controls="nav-history{{index}}" aria-selected="false">Historial</a>

                                        </div>
                                    </nav>
                                </div>
                                <div class="card mt-1" style="border:none;padding: 0px;margin: 0px;" *ngIf="getValidationNameEqualsResponsable(userGroup,item.NOMBRECOMPLETO); let indexequals = index">
                                    <div class="tab-content" id="nav-tabContent">
                                        <div class="tab-pane fade show active" id="nav-home{{index}}" role="tabpanel" aria-labelledby="nav-home-tab{{index}}">
                                            <div id="{{stateCompletado.sCollapHead + regimen.desCorto + index}}" style="">

                                                <div class="card-header headerSenials " style="margin-top: 0px;padding-top: 0px;background-color: rgb(43 36 91 / 8%);">

                                                    <div class="row">
                                                        <div class="col-lg-1" style="padding-right: 0px;padding-left: 0px;">
                                                            <div class="pt-4 pl-4" *ngIf="item.TIPO_FORM !== 'C'">
                                                                <i class="fas fa-2x fa-ellipsis-h" style="cursor: pointer;" data-toggle="collapse" attr.href="#{{stateCompletado.sHrefHead + regimen.desCorto + index}}"></i>
                                                            </div>


                                                        </div>
                                                        <div class="col-lg-11">
                                                            <div class="row">
                                                                <div class="{{getColumsStyleByTypeUser()}}" style="padding-left: 0px;padding-right: 0px;">
                                                                    <div class="card-link unlinkeo">

                                                                        <div class="row">
                                                                            <div class="col-lg-1  pt-3" style="margin-right: 65px;">
                                                                                <div class="text-left badge badge-danger" style="font-size: 16px;font-weight: bold;">
                                                                                    {{item.SNOMBRE_ALERTA}}
                                                                                </div>
                                                                            </div>
                                                                            <div class="col-lg-2  pt-3">
                                                                                <div class="text-left">
                                                                                    <div class="txtDetalle" style="text-align:justify">
                                                                                        {{item.DFECHA_ESTADO_MOVIMIENTO}}
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                            <div class="col-lg-8"></div>
                                                                            <div class="col-lg-1" *ngIf="STIPO_USUARIO === 'OC'"></div>
                                                                            <div class="col-lg-1  pt-3" *ngIf="STIPO_USUARIO === 'RE'"></div>


                                                                        </div>
                                                                        <div class="row" *ngIf="STIPO_USUARIO === 'OC'">
                                                                            <div class="col-lg-6">
                                                                                <div *ngFor="let pregHeadOne of item.arrPreguntasCabecera;let incPregHeadOne = index;">
                                                                                    <!-- <div class="row mt-2"
                                                                                    style="background-color: rgb(0 0 0 / 20%);"> -->
                                                                                    <div class="row mt-2" style="">
                                                                                        <div class="col-lg-6">
                                                                                            <div class="tooltipT">
                                                                                                <!-- <div class="tooltiptextT">

                                                                                                <div class="ml-1 mr-1">
                                                                                                    {{pregHeadOne.SPREGUNTA}}
                                                                                                </div>
                                                                                            </div> -->
                                                                                                <div class="txtDetalle" style="text-align:justify">
                                                                                                    <div style="font-weight: bold;display: inline;color: royalblue;">
                                                                                                        {{getAlerta(item.SNOMBRE_ALERTA)}}</div>
                                                                                                    {{pregHeadOne.SPREGUNTA}}
                                                                                                </div>
                                                                                            </div>

                                                                                        </div>
                                                                                        <div class="col-lg-6">
                                                                                            <div class="txtDetalle">
                                                                                                <div class="row">

                                                                                                    <div class="pr-2 " style="padding-left:13px;color: royalblue;font-weight: 700;display: inline;">
                                                                                                        {{pregHeadOne.SRESPUESTA}}
                                                                                                    </div>
                                                                                                    <div class="col-10" style="text-align: justify;">
                                                                                                        {{pregHeadOne.SCOMENTARIO}}
                                                                                                    </div>

                                                                                                </div>
                                                                                            </div>
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                            <div class="col-lg-6 pt-4 pb-4">
                                                                                <div class="row">
                                                                                    <div class="col-lg-7">
                                                                                        <div ngbTooltip="{{arrInputCommentSolCompl[index]}}" placement="{{UltimoTooltip(index,getArray(stateCompletado.sState,regimen.id))}}">
                                                                                            <input type="text" class="form-control" [(ngModel)]="arrInputCommentSolCompl[index]" id="{{'Complemento' + regimen.desCorto + index}}" placeholder="Ingresar comentario">

                                                                                        </div>
                                                                                    </div>
                                                                                    <div class="col-lg-5">
                                                                                        <!-- <button class="btn btn-warning "
                                                                                        (click)="solicitarComplemento(index,item)">Solicitar
                                                                                        complemento</button> -->
                                                                                        <button class="btn btn-warning text-white " (click)="solicitarComplemento(index,item)">Solicitar
                                              complemento</button>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        <div class="col-lg-12" *ngIf="STIPO_USUARIO === 'RE' && item.TIPO_FORM !=='C'">
                                                                            <div class="row mt-2" style="padding-left: 0px;padding-right: 0px;" *ngFor="let pregHeadOne of item.arrPreguntasCabecera;let incPregHeadOne = index;">
                                                                                <div class="col-lg-4" style="margin-right: 10px;    margin-left: -10px;">
                                                                                    <div class="tooltipT">
                                                                                        <!-- <div class="tooltiptextT">
                                                                                        <div class="ml-1 mr-1">
                                                                                            {{pregHeadOne.SPREGUNTA}}
                                                                                        </div>
                                                                                    </div> -->
                                                                                        <div class="txtDetalle" style="text-align:justify">

                                                                                            <div style="font-weight: bold; display: inline;color: royalblue;">
                                                                                                {{getAlerta(item.SNOMBRE_ALERTA)}}</div>
                                                                                            {{pregHeadOne.SPREGUNTA}}
                                                                                        </div>
                                                                                    </div>

                                                                                </div>
                                                                                <div class="col-lg-3">
                                                                                    <div class="txtDetalle" style="text-align:justify">
                                                                                        <div class="row">
                                                                                            <div class="pr-2" style="margin-left: 17px;color: royalblue;font-weight: 700;display: inline;">
                                                                                                {{pregHeadOne.SRESPUESTA}}
                                                                                            </div>
                                                                                            <div class="col-10" style="text-align: justify;">
                                                                                                {{pregHeadOne.SCOMENTARIO}}
                                                                                            </div>
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                                                                <div class="col-lg-5">
                                                                                    <app-adjuntar-files [parent]="this" [item]="item" [indexInput]="index" [arrFilesAdjuntos]="[]" [arrFilesGuardados]="getFilesByTipoUsuario(item.arrAdjuntos,'RE')">
                                                                                    </app-adjuntar-files>
                                                                                </div>

                                                                            </div>
                                                                        </div>
                                                                        <div class="row" style='padding-left:0px' *ngIf="STIPO_USUARIO === 'RE' && item.TIPO_FORM =='C'">
                                                                            <div class="col-lg-7">
                                                                                {{ValidarTexto(item.SDESCRIPCION_ALERTA)}}
                                                                                <div [innerHTML]="textHtml"></div>
                                                                            </div>
                                                                            <div class="col-lg-1 parrafoAdj text-center" style="padding-left: 0px;padding-right:0px;cursor: pointer;" (click)="descargarComplementoSubido(item)">
                                                                                <div>
                                                                                    <i class="fas fa-file-download"  style="font-size: 25px;text-align: center;padding-top: 10px;color: #2e7d32;"></i>
                                                                                </div>
                                                                                <div>
                                                                                    Descargar Muestra
                                                                                </div>
                                                                                  
                                                                                
                                                                            </div>
                                                                            <div class="col-lg-1" style=" padding: 0px;  text-align: center;  ">
                                                                                <a style="cursor: pointer;padding: 0px 1px;">
                                                                                    <img src="assets/icons/excel-microsoft.png" (click)="descargarComplemento2(item)" style="width: 38px;" /> Descargar Complemento
                                                                                </a>
                                                                            </div>
                                                                            <div class="col-lg-3"></div>
                                                                        </div>

                                                                        <div class="row mt-3" *ngIf="STIPO_USUARIO === 'OC'">
                                                                            <div class="col-lg-3">

                                                                            </div>
                                                                            <div class="col-lg-3">
                                                                                <app-adjuntar-files [parent]="this" [item]="item" [indexInput]="index" [arrFilesAdjuntos]="[]" [arrFilesGuardados]="getFilesByTipoUsuario(item.arrAdjuntos,'RE')">
                                                                                </app-adjuntar-files>
                                                                            </div>
                                                                            <div class="col-lg-6">
                                                                                <div class="">
                                                                                    <div class="col-lg-2">
                                                                                        <input type="file" name="file" id="archivoFilesComplementary{{regimen.id}}-{{index}}" class="inputfile" multiple (change)="addFilesUniversal($event,item.NIDALERTA_CABECERA,item.NIDALERTA,regimen.id,'ADJUNTOS-FORM','OC')" />
                                                                                        <div class="text-center">
                                                                                            <label for="archivoFilesComplementary{{regimen.id}}-{{index}}">
                                                                                                <i class="fas fa-paperclip fa-2x fa-lg"
                                                                                                style="color: #706d6d;cursor:pointer">
                                                                                                <div class="parrafoAdj text-center">
                                                                                                    Adjuntar archivo</div>
                                                                                                </i>
                                                                                            </label>
                                                                                        </div>
                                                                                    </div>
                                                                                    <div class="col-lg-10">
                                                                                        <app-adjuntar-files [parent]="this" [item]="item" [indexInput]="index" [arrFilesAdjuntos]="getFilesCabecera(item, 'ADJUNTOS-FORM',regimen.id)" [arrFilesGuardados]="getFilesByTipoUsuario(item.arrAdjuntos,'OC')">
                                                                                        </app-adjuntar-files>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="col-lg-1" style="padding-left: 25px;padding-right: 0px;padding-top: 47px;" *ngIf="STIPO_USUARIO === 'OC'">
                                                                    <div class="text-center">
                                                                        <div class="form-check">
                                                                            <label class="form-check-label">
                                        <input type="checkbox" [(ngModel)]="arrCheckbox[index]"
                                          (change)="setDataCheckboxApproved(item,index)"
                                          style="height: 30px;width: 30px;" class="form-check-input" value="">
                                      </label>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>



                                                    </div>


                                                </div>
                                                <div id="{{stateCompletado.sHrefHead + regimen.desCorto + index}}" class="collapse {{parent.getStyleShowByAlert(item.NIDALERTA)}} {{validarcomplemento(item)}}" attr.data-parent="#{{stateCompletado.sCollapHead + regimen.desCorto + index}}">

                                                    <div class="row" *ngIf="STIPO_USUARIO === 'OC'">
                                                        <div class="col-lg-12" style="padding-right: 30px;" *ngFor="let listComplemento of filtroComplemeto2(item);">

                                                            <div class="borderFormat">

                                                                <div class="row mb-2 " style="padding-left: 30px;margin-top: -35px;">
                                                                    <div class="Header">
                                                                        <div class="row">
                                                                            <div class="col-lg-19">
                                                                                <h4 class="TitleLine2">Complemento</h4>
                                                                            </div>
                                                                        </div>

                                                                    </div>
                                                                    <br>

                                                                </div>

                                                                <div class="row pt-2" style="margin-top:-20px;">
                                                                    <div class="col-lg-12">
                                                                        <div class="borderFormat">
                                                                            <div class="row pt-2">
                                                                                <div class="form-group" style="padding-left: 20px;padding-top:5px">
                                                                                    <span class="fontText">Nombre </span>
                                                                                </div>
                                                                                <div class="col-lg-1 form-group" placement="top" ngbTooltip="{{listComplemento.SNOMBRE_COMPLEMENTO}}">
                                                                                    <input [disabled]="true" id="usName" type="text" class="form-control buttonSinBorder" value={{listComplemento.SNOMBRE_COMPLEMENTO}}>
                                                                                </div>


                                                                                <div class="form-group" style="padding-top:5px">
                                                                                    <span class="fontText">Descripción</span>
                                                                                </div>
                                                                                <div class="col-lg-3 form-group" style="padding-left:13px" placement="top" ngbTooltip="{{listComplemento.SDESCRIPCION}}">
                                                                                    <input [disabled]="true" id="usName" type="text" class="form-control buttonSinBorder" value={{listComplemento.SDESCRIPCION}}>
                                                                                </div>
                                                                                <div class="form-group" style="padding-top:5px">
                                                                                    <span class="fontText">Seleccionar usuario:</span>
                                                                                </div>
                                                                                <div class="col-lg-3" title="Nombre del usuario">

                                                                                    <select [(ngModel)]="this.valueUserSelect[index] == undefined ? 0 : this.valueUserSelect[index]" name="this.userId" (change)="cambioCombo(index,$event)" class="form-control buttonSinBorder">
                                                                                        <option value="0" selected>Seleccione</option>
                                                                                        <option *ngFor="let item of ListUser" value="{{item.ID_USUARIO}}" id="userIdSelected">
                                                                                            {{item.NOMBRECOMPLETO}}</option>


                                                                                    </select>
                                                                                </div>
                                                                                <div class="col-lg-1 " style="margin-right: 50px;">
                                                                                    <button title="Deshacer cambios" style="display: flex;justify-content: center;align-items: center;width: 100px;" class="btn btn-warning text-white " (click)="AgregarUsuario(item,listComplemento,index)">Agregar</button>
                                                                                </div>

                                                                            </div>
                                                                            <!-- <div class="row container-xl">
                                <div class="col-12">
                                  <div class=""
                                    style="display: flex;justify-content: center;align-items: center;padding-top:20px">
                                    <div class="row">
                                      <div class="col-lg-4" title="Nombre del usuario"
                                        style="display: flex;justify-content: center;align-items: center;">
                                        <label class="fontText">Seleccionar usuario:</label>
                                      </div>
                                      <div class="col-lg-6" title="Nombre del usuario"
                                        style="display: flex;justify-content: center;align-items: center;">

                                        <select [(ngModel)]="this.userId" name="this.userId"
                                          class="form-control buttonSinBorder">
                                          <option value="0" selected>Seleccione</option>
                                           <option *ngFor="let item of ListUser" value="{{item.ID_USUARIO}}"
                                                                                            id="userIdSelected">
                                                                                            {{item.NOMBRECOMPLETO}}</option>  


                                        </select>
                                      </div>
                                      <div class="col-lg-1 " style="margin-right: 50px;">
                                        <button title="Deshacer cambios"
                                          style="display: flex;justify-content: center;align-items: center;width: 100px;"
                                          class="btn btn-warning text-white "
                                          (click)="AgregarUsuario(item,listComplemento)">Agregar</button>
                                      </div>
                                    </div>



                                  </div>
                                </div>
                              </div> -->
                                                                        </div>
                                                                    </div>
                                                                </div>

                                                                <div class="row container-xl">
                                                                    <div class="col-12">
                                                                        <div class="borderFormat">
                                                                            <div class="row" style="border-bottom: 2px solid #26296D;">
                                                                                <div class="col-2 txtCabecera" style="font-size: 14px;">Nombre</div>
                                                                                <!-- <div class="col-2 txtCabecera" style="font-size: 14px;">Perfil </div> -->
                                                                                <div class="col-2 txtCabecera" style="font-size: 14px;">Cargo</div>
                                                                                <div class="col-2 txtCabecera" style="font-size: 14px;">Estado</div>
                                                                                <div class="col-2 txtCabecera text-center" style="font-size: 14px;">Email</div>
                                                                                <div class="col-2 txtCabecera text-center" style="font-size: 14px;">Adjuntar </div>
                                                                                <div class="col-1 txtCabecera" style="font-size: 14px;">Documento</div>
                                                                                <div class="col-1 txtCabecera text-center" style="font-size: 14px;">Eliminar</div>
                                                                            </div>



                                                                            <div *ngFor="let array of this.NewArreglo">
                                                                                <div *ngIf="array.NIDALERTA == item.NIDALERTA && array.NOMBRECOMPLETO == item.NOMBRECOMPLETO">
                                                                                    <div *ngIf="array.RESULTADO.length !==0;else ListaVacia">
                                                                                      
                                                                                        <div *ngFor="let listUsu of  array.RESULTADO; let indice = index">
                                                                                            
                                                                                            <div class="row" id="pintaGrilla" style="padding-top: 1.1rem; padding-bottom: 1.1rem;">

                                                                                              

                                                                                                <div class="col-2 text-left txtDetalle">{{listUsu.NOMBRECOMPLETO}}</div>
                                                                                                <!-- <div class="col-2 text-left txtDetalle">{{listUsu.SNAME}}</div> -->
                                                                                                 
                                                                                                <div class="col-2 text-left txtDetalle">{{listUsu.SDESCARGO}}</div>
                                                                                                <div class="col-2 text-left txtDetalle">{{listUsu.SNOMBRE_ESTADO}}</div>
                                                                                                <div class="col-2 text-center txtDetalle">{{listUsu.SEMAIL}}</div>
                                                                                                <div class="col-2 text-center">
                                                                                                    <div *ngIf="(listUsu.CONSULTA == 'C')">
                                                                                                        <input type="file" name="file" id="archivoComplemento{{regimen.id}}-{{index}}-{{indice}}" class="inputfile" multiple (change)="addFilesUniversal2($event,item,'COMPLEMENTO','RE', listUsu,indice)" />
                                                                                                             <div class="text-center" style="display:table-caption;float:left;">
                                                                                                        <label for="archivoComplemento{{regimen.id}}-{{index}}-{{indice}}" style="cursor: pointer;" placement="top" ngbTooltip="Adjuntar">
                                                                                                            <i class="fas fa-paperclip"  style="cursor: pointer;"></i>
                                                                                                         </label>
                                                                                                        
                                                                                                            </div>
                                                                                                    </div>
                                                                                                    
                                                                                                    <!-- <div *ngIf="(listUsu.SFILE_NAME !== '' && listUsu.SNOMBRE_ESTADO == 'PENDIENTE') || (listUsu.SFILE_NAME == '' && listUsu.SFILE_NAME_LARGO !== '' && listUsu.SNOMBRE_ESTADO == 'PENDIENTE')"> -->
                                                                                                        <div *ngIf="(listUsu.SFILE_NAME !== '' && listUsu.CONSULTA !== 'STORE')">
                                                                                                            <div   style="float: right;cursor: pointer;" placement="top" ngbTooltip="Eliminar">
                                                                                                                <i class="far fa-times-circle" (click)="removeFile(item,listUsu)"></i>
                                                                                                            </div>
                                                                                                        </div>
                                                                                                        <!-- <div *ngIf="(listUsu.SFILE_NAME == '' && listUsu.CONSULTA == 'STORE')">
                                                                                                            <div   style="float: right;cursor: pointer;">
                                                                                                                <i class="fas fa-file-download" (click)="descargarArchivoSubido(item)"></i>
                                                                                                            </div>
                                                                                                        </div> -->
                                                                                                    
                                                                                                    <div  class="txtDetalle"  placement="top" ngbTooltip="{{listUsu.SFILE_NAME_LARGO}}">
                                                                                                        <a (click)="descargarArchivoSubido(item,listUsu)" style="color: blue;cursor: pointer;"><u>{{listUsu.SFILE_NAME}}</u></a> 
                                                                                                    </div>
                                                                                                   
                                                                                                    
                                                                                           
                                                                                                 </div>     
                                                                                                <div class="col-1 text-center txtDetalle">
                                                                                                    <a *ngIf="listUsu.SNOMBRE_ESTADO !== 'PENDIENTE'" style="cursor: pointer"><i
                                                                                                             class="fas fa-file-excel" (click)="descargarComplemento(item,listUsu)" style="color:green;font-size: 20px;"></i></a>
                                                                                                </div>



                                                                                                <div class="col-1 text-center txtDetalle" *ngIf="listUsu.CONSULTA != 'STORE'" placement="top" ngbTooltip="Eliminar registro">
                                                                                                    <td class="text-center" style="display: flex;justify-content: center ">
                                                                                                        <i class="fas fa-trash-alt" (click)="EliminarUsuario(indice,item)" style="cursor: pointer;"></i>



                                                                                                    </td>
                                                                                                </div>

                                                                                            </div>
                                                                                        </div>

                                                                                    </div>
                                                                                </div>
                                                                            </div>

                                                                            <ng-template #ListaVacia>
                                                                                <div class="col-12 text-center txtDetalle" style="font-weight: 700;padding-top:15px">No hay usuarios agregados</div>
                                                                            </ng-template>


                                                                        </div>
                                                                    </div>
                                                                </div>


                                                                <div class="row" style="padding-top: 25px;">
                                                                    <div class="col-4"></div>
                                                                    <div class="col-4">
                                                                        <button class="btn btn-warning text-white " style="width: 100%;" (click)="EnviarCompUsuario(item,listComplemento)">Solicitar complemento a los usuarios</button>
                                                                    </div>
                                                                    <div class="col-4"></div>
                                                                </div>

                                                            </div>




                                                        </div>
                                                    </div>


                                                    <app-button-download-report [item]="item" [regimen]="regimen" [STIPO_USUARIO]="STIPO_USUARIO" [parent]="this"></app-button-download-report>



                                                    <div class="card-body" style="background-color: white;">
                                                        <!--<app-nc-company-detail></app-nc-company-detail>-->
                                                        <!--<div *ngIf="STIPO_USUARIO =='OC' && (item.NIDALERTA == 3 || item.NIDALERTA == 4 || item.NIDALERTA == 5 || item.NIDALERTA == 10)">
                                                        <img *ngIf="STIPO_USUARIO == 'OC' && item.NIDALERTA == 3"
                                                            src="assets/icons/excel-microsoft.png" title="Descargar Excel Lista GAFI"
                                                            alt="" style="cursor: pointer;height:40px;width: 35px;" (click)="getExcelListAlert(item.NIDALERTA,regimen.id)" />
                                                        <img *ngIf="STIPO_USUARIO == 'OC' && item.NIDALERTA == 4"
                                                            src="assets/icons/excel-microsoft.png"
                                                            title="Descargar Excel Notas de Crédito" alt=""
                                                            style="cursor: pointer;height:40px;width: 35px;" (click)="getExcelListAlert(item.NIDALERTA,regimen.id)" />
                                                        <img *ngIf="STIPO_USUARIO == 'OC' && item.NIDALERTA == 5"
                                                            src="assets/icons/excel-microsoft.png"
                                                            title="Descargar Excel Direcciones Duplicadas" alt=""
                                                            style="cursor: pointer;height:40px;width: 35px;" (click)="getExcelListAlert(item.NIDALERTA,regimen.id)" />
                                                        <img *ngIf="STIPO_USUARIO == 'OC'  && item.NIDALERTA == 10"
                                                            src="assets/icons/excel-microsoft.png" 
                                                            title="Descargar Cliente Riesgo Alto"
                                                            alt="" style="cursor: pointer;height:40px;width: 35px;" (click)="getExcelListAlert(item.NIDALERTA,regimen.id)" />
                                                        Descargar Registro
                                                    </div>-->
                                                        <div *ngIf="item.NIDALERTA !== 2">

                                                            <app-c1-detail-company [parent]="this" [objAlerta]="item" [objState]="stateCompletado">
                                                            </app-c1-detail-company>
                                                            <div class="">
                                                                <!--CONVERSACION-->
                                                                <app-comments-alerts-state [parent]="this" [arrConversacion]="item.arrConversacionCabecera">
                                                                </app-comments-alerts-state>
                                                            </div>



                                                        </div>
                                                        <!--<div *ngIf="item.NIDALERTA === 2">
                                                        <app-view-c2-form></app-view-c2-form>
                                                    </div>-->

                                                    </div>
                                                </div>
                                            </div>


                                        </div>
                                        <div class="tab-pane fade" id="nav-history{{index}}" role="tabpanel" aria-labelledby="nav-history-tab{{index}}">

                                            <app-button-download-report [item]="item" [regimen]="regimen" [STIPO_USUARIO]="STIPO_USUARIO" [parent]="this"></app-button-download-report>
                                            <div class="card-body" style="background-color: white;">
                                                <!--<app-nc-company-detail></app-nc-company-detail>-->
                                                <!--<div *ngIf="STIPO_USUARIO =='OC' && (item.NIDALERTA == 3 || item.NIDALERTA == 4 || item.NIDALERTA == 5 || item.NIDALERTA == 10)">
                                                    <img *ngIf="STIPO_USUARIO == 'OC' && item.NIDALERTA == 3"
                                                        src="assets/icons/excel-microsoft.png" title="Descargar Excel Lista GAFI"
                                                        alt="" style="cursor: pointer;height:40px;width: 35px;" (click)="getExcelListAlert(item.NIDALERTA,regimen.id)" />
                                                    <img *ngIf="STIPO_USUARIO == 'OC' && item.NIDALERTA == 4"
                                                        src="assets/icons/excel-microsoft.png"
                                                        title="Descargar Excel Notas de Crédito" alt=""
                                                        style="cursor: pointer;height:40px;width: 35px;" (click)="getExcelListAlert(item.NIDALERTA,regimen.id)" />
                                                    <img *ngIf="STIPO_USUARIO == 'OC' && item.NIDALERTA == 5"
                                                        src="assets/icons/excel-microsoft.png"
                                                        title="Descargar Excel Direcciones Duplicadas" alt=""
                                                        style="cursor: pointer;height:40px;width: 35px;" (click)="getExcelListAlert(item.NIDALERTA,regimen.id)" />
                                                    <img *ngIf="STIPO_USUARIO == 'OC'  && item.NIDALERTA == 10"
                                                        src="assets/icons/excel-microsoft.png" 
                                                        title="Descargar Cliente Riesgo Alto"
                                                        alt="" style="cursor: pointer;height:40px;width: 35px;" (click)="getExcelListAlert(item.NIDALERTA,regimen.id)" />
                                                    Descargar Registro
                                                </div>-->
                                                <div *ngIf="item.NIDALERTA !== 2">

                                                    <app-c1-detail-company [parent]="this" [objAlerta]="item" [objState]="stateCompletado">
                                                    </app-c1-detail-company>
                                                    <div class="">
                                                        <!--CONVERSACION-->
                                                        <app-comments-alerts-state [parent]="this" [arrConversacion]="item.arrConversacionCabecera">
                                                        </app-comments-alerts-state>
                                                    </div>



                                                </div>
                                                <!--<div *ngIf="item.NIDALERTA === 2">
                                                    <app-view-c2-form></app-view-c2-form>
                                                </div>-->

                                            </div>
                                        </div>
                                    </div>
                                </div>

                            </div>

                            <br>

                        </div>
                        <div class="row pt-3">
                            <div class="col-lg-10">

                            </div>
                            <div class="col-lg-2 text-right">
                                <button type="button" class="btn btn-warning text-white " *ngIf="STIPO_USUARIO==='OC'" (click)="aprobarFormularios()">
                  Guardar
                </button>
                            </div>
                        </div>
                    </div>


                </div>

            </div>


        </div>
        <div class="card" *ngIf="(getArray(stateCompletado.sState,regimen.id)).length == 0">
            <div class="card-body">
                <div class="row">
                    <div class="col-lg-4"></div>
                    <div class="col-lg-4">
                        <p class="text-center">{{parent.cadenaEstadosSinForm}}</p>
                    </div>
                    <div class="col-lg-4"></div>
                </div>
            </div>
        </div>
    </div>


</div>